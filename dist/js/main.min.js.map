{"version":3,"sources":["main.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_step","nav","document","querySelector","navButton","navSpan","background","createElement","_iterator","querySelectorAll","listItem","onmouseup","target","blur","addEventListener","closest","body","append","classList","add","toggle","contains","setAttribute","removeAttribute","slideDistance","maxSlideDistance","countSlideImages","_step2","galleryImages","prevGalleryButton","nextGalleryButton","listOfImages","currentSlide","_iterator2","button","gallerySlideNext","documentElement","clientWidth","offsetWidth","style","transform","concat","gallerySlidePrev","_step3","entireImgSection","thumbSection","allImages","_iterator3","img","tabIndex","focus","bigPicture","onThumbClick","currentPicture","changeImages","onThumbFocus","code","lightboxHandler","lightboxSection","cloneNode","lightboxBackground","closeButton","nextButton","prevButton","bigImage","allThumbs","allImagesSrcs","map","imgNode","getAttribute","replace","allSourcesWebp","src","currentImageInd","className","innerHTML","_i","_buttons","targetSrc","indexOf","changeImagesLightbox","onkeydown","preventDefault","remove","section","picture","targetSrcset","currentBigImage","insertSpan","counter","minusButton","firstElementChild","plusButton","lastElementChild","quantity","quantityValue","Number","cta","cart","cartInfo","cartEmpty","cartMain","deleteButton","notification","changeQuantityClick","changeQuantityFocus","ctaClick","cartClick","deleteProducts","quantityChange","_i2","_arr","key","priceText","textContent","hidden","display","animated","console","log","visibility"],"mappings":"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","file":"main.min.js","sourcesContent":["// Header nav\r\nconst nav = document.querySelector('.header__nav');\r\nconst navButton = document.querySelector('.header__nav-button');\r\nconst navSpan = navButton.querySelector('span');\r\nconst background = document.createElement('div');\r\n\r\nfor (let listItem of nav.querySelectorAll('li')) {\r\n    listItem.onmouseup = (e) => e.target.blur();\r\n}\r\n\r\nnavButton.addEventListener('click', function(e) {\r\n    if (!e.target.closest('button')) return;\r\n    \r\n    if (!nav.querySelector('.background')) {\r\n        document.body.append(background);\r\n        background.classList.add('background');\r\n    };\r\n\r\n    nav.classList.toggle('open');\r\n    navSpan.classList.toggle('open');\r\n    background.classList.toggle('open');\r\n    if (nav.classList.contains('open')) {\r\n        navButton.setAttribute('aria-expanded', 'true');\r\n    } else {\r\n        navButton.removeAttribute('aria-expanded');\r\n    }\r\n});\r\n\r\n//images - medium + small screens\r\nconst galleryImages = document.querySelector('.main__add-gallery');\r\nconst prevGalleryButton = galleryImages.querySelector('.arrow-prev');\r\nconst nextGalleryButton = galleryImages.querySelector('.arrow-next');\r\nconst listOfImages = galleryImages.querySelector('.main__slide-container');\r\nlet currentSlide = 0, slideDistance, maxSlideDistance, countSlideImages;\r\n\r\nfor (let button of galleryImages.querySelectorAll('.main__slide-arrow')) {\r\n    button.onmouseup = (e) => e.target.blur(); \r\n}\r\n\r\n//slide gallery implementation\r\nnextGalleryButton.addEventListener('click', gallerySlideNext);\r\nprevGalleryButton.addEventListener('click', gallerySlidePrev);\r\n\r\nfunction gallerySlideNext() {\r\n    countSlideImages = document.documentElement.clientWidth > 650 ? 2 : 3;\r\n    slideDistance = galleryImages.querySelector('img').offsetWidth;\r\n    maxSlideDistance = slideDistance * countSlideImages;\r\n\r\n    if (currentSlide + slideDistance <= maxSlideDistance) {\r\n        listOfImages.style.transform = `translate(-${currentSlide + slideDistance}px)`;\r\n        currentSlide += slideDistance; \r\n    } else {\r\n        return;\r\n    }\r\n}\r\n\r\nfunction gallerySlidePrev() {\r\n    countSlideImages = document.documentElement.clientWidth > 650 ? 2 : 3;\r\n    slideDistance = galleryImages.querySelector('img').offsetWidth;\r\n    maxSlideDistance = slideDistance * countSlideImages;\r\n\r\n    if (currentSlide - slideDistance >= 0) {\r\n        listOfImages.style.transform = `translate(-${(currentSlide - slideDistance)}px)`;\r\n        currentSlide -= slideDistance;\r\n    } else {\r\n        return;\r\n    }\r\n}\r\n\r\n// Images - large screens\r\nconst entireImgSection = document.querySelector('.main__section--images');\r\nconst thumbSection = document.querySelector('.main__thumbnails');\r\n\r\n// all images can be focused\r\nconst allImages = entireImgSection.querySelectorAll('img');\r\nfor (let img of allImages) {\r\n    if (document.documentElement.clientWidth >= 1150) {\r\n        img.tabIndex = 0;\r\n    }\r\n}\r\n//init focus\r\nallImages[1].focus();\r\n\r\nconst bigPicture = document.querySelector('[data-current-big]');\r\n\r\nthumbSection.addEventListener('click', onThumbClick);\r\nthumbSection.addEventListener('focusin', onThumbFocus);\r\nbigPicture.addEventListener('click', lightboxHandler);\r\n\r\n\r\nfunction onThumbClick(e) {\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    const currentPicture = target.closest('picture');\r\n    const currentSection = target.closest('section');\r\n\r\n    changeImages(currentSection, currentPicture);\r\n}\r\n\r\nfunction onThumbFocus(e) {\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    target.addEventListener('keydown', function (e) {\r\n        if (e.code == 'Enter' || e.code == 'Space') {\r\n            changeImages(target.closest('picture'));\r\n        } else {\r\n            return;\r\n        }\r\n    })\r\n}\r\n\r\n//Lightbox \r\n\r\nfunction lightboxHandler(e) {\r\n    if (document.documentElement.clientWidth < 1150) return;\r\n\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    const lightboxSection = entireImgSection.cloneNode(true);\r\n    const lightboxBackground = document.createElement('div');\r\n    const closeButton = document.createElement('span');\r\n    const nextButton = document.createElement('button');\r\n    const prevButton = document.createElement('button');\r\n    const bigImage = lightboxSection.querySelector('[data-current-big]');\r\n    const allThumbs = Array.from(lightboxSection.querySelectorAll('.main__image--thumb'));\r\n    const allImagesSrcs = allThumbs.map(imgNode => {\r\n        return imgNode.getAttribute('src').replace(/-thumbnail/, '');\r\n    });\r\n    const allSourcesWebp = allImagesSrcs.map(src => {\r\n        return src.replace(/jpg$/, 'webp');\r\n    });\r\n    let currentImageInd = 0;\r\n\r\n    if (!document.querySelector('.lightbox-section')) {\r\n        lightboxSection.classList.add('lightbox-section', 'container-main');\r\n        document.querySelector('.main').append(lightboxSection);\r\n\r\n        lightboxBackground.classList.add('lightbox-background');\r\n        document.querySelector('.main').append(lightboxBackground);\r\n\r\n        //buttons\r\n        closeButton.className = 'lightbox-section__close';\r\n        nextButton.className = 'lightbox-section__next';\r\n        nextButton.innerHTML = '&#10095;';\r\n        prevButton.className = 'lightbox-section__prev';\r\n        prevButton.innerHTML = '&#10094;'\r\n\r\n        const buttons = [closeButton, nextButton, prevButton];\r\n        for (let button of buttons) {\r\n            lightboxSection.append(button);\r\n            button.tabIndex = 0;\r\n            button.onmouseup = (e) => e.target.blur();\r\n        }\r\n    }\r\n\r\n    lightboxBackground.classList.add('open');\r\n    lightboxSection.classList.add('open');\r\n\r\n    //events\r\n    lightboxSection.addEventListener('click', clickThumb);\r\n    lightboxSection.addEventListener('focusin', focusThumb);\r\n    closeButton.addEventListener('click', closeLightbox);\r\n    nextButton.addEventListener('click', slideNextImage);\r\n    prevButton.addEventListener('click', slidePrevImage); \r\n\r\n    //initial focus\r\n    allThumbs[0].focus();\r\n\r\n    //click/focus listeners\r\n    function clickThumb(e) {\r\n        let target = e.target.closest('img');\r\n        if (!target || !lightboxSection.contains(target)) return;\r\n\r\n        let targetSrc = target.getAttribute('src').replace(/-thumbnail/, '');\r\n        currentImageInd = allImagesSrcs.indexOf(targetSrc);\r\n\r\n        changeImagesLightbox();\r\n    }\r\n\r\n    function focusThumb(e) {\r\n        let target = e.target.closest('img');\r\n        if (!target || !lightboxSection.contains(target)) return;\r\n\r\n        target.onkeydown = function (e) {\r\n            if (e.code == 'Enter' || e.code == 'Space') {\r\n                e.preventDefault(); // prevent scroll on 'space'\r\n                let targetSrc = target.getAttribute('src').replace(/-thumbnail/, '');\r\n                currentImageInd = allImagesSrcs.indexOf(targetSrc);\r\n\r\n                changeImagesLightbox();\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    //event-listeners for buttons;\r\n    function closeLightbox() {\r\n        lightboxSection.remove();\r\n        lightboxBackground.remove();\r\n    }\r\n\r\n    function slideNextImage() {\r\n        if (currentImageInd === allImagesSrcs.length - 1) return;\r\n\r\n        currentImageInd++;\r\n        allThumbs[currentImageInd].focus();\r\n        changeImagesLightbox();\r\n    }\r\n\r\n    function slidePrevImage() {\r\n        if (currentImageInd === 0) return;\r\n\r\n        currentImageInd--;\r\n        allThumbs[currentImageInd].focus();\r\n        changeImagesLightbox();\r\n    }\r\n\r\n\r\n    //helper functions\r\n    function changeImagesLightbox() {\r\n        bigImage.querySelector('img').setAttribute('src', allImagesSrcs[currentImageInd]);\r\n        bigImage.querySelector('source').setAttribute('srcset', allSourcesWebp[currentImageInd]);\r\n    }\r\n}\r\n\r\n\r\n\r\n//helper functions \r\nfunction changeImages(section, picture) {\r\n    const targetSrc = picture.querySelector('img').getAttribute('src').replace(/-thumbnail/, '');\r\n    const targetSrcset = picture.querySelector('source').getAttribute('srcset').replace(/-thumbnail/, '');\r\n\r\n    const currentBigImage = section.querySelector('[data-current-big]');\r\n\r\n    currentBigImage.querySelector('img').setAttribute('src', targetSrc);\r\n    currentBigImage.querySelector('source').setAttribute('srcset', targetSrcset);\r\n}\r\n\r\n\r\n// Product info\r\n\r\nconst counter = document.querySelector('.main__counter');\r\nconst minusButton = counter.firstElementChild;\r\nconst plusButton = counter.lastElementChild;\r\nconst quantity = counter.querySelector('input[type=\"number\"]');\r\nlet quantityValue = Number(quantity.value);\r\n\r\nconst cta = document.querySelector('.main__cta');\r\nconst cart = document.querySelector('.header__cart');\r\nconst cartInfo = document.querySelector('.cart-info');\r\nconst cartEmpty = cartInfo.querySelector('.cart-info__init');\r\nconst cartMain = cartInfo.querySelector('.cart-info__wrapper');\r\nconst deleteButton = cartInfo.querySelector('.cart-info__button');\r\nlet notification = null;\r\nlet insertSpan;\r\n\r\n\r\ncounter.addEventListener('click', changeQuantityClick);\r\ncounter.addEventListener('focusin', changeQuantityFocus);\r\ncta.addEventListener('click', ctaClick);\r\ncart.addEventListener('click', cartClick);\r\ndeleteButton.addEventListener('click', deleteProducts);\r\nquantity.addEventListener('change', quantityChange);\r\n\r\n//get rid of keeping focus after click  \r\nfor (let button of [document.querySelector('.cart-info__checkout'), cta]) {\r\n    button.onmouseup = (e) => e.target.blur();\r\n}\r\n\r\nfunction changeQuantityClick(e) {\r\n    let target = e.target.closest('button');\r\n    if (!target || !counter.contains(target)) return;\r\n\r\n    if (target == plusButton) {\r\n        quantityValue = quantityValue + 1;\r\n        quantity.value = quantityValue;\r\n    }\r\n    else {\r\n        if (quantityValue > 0) {\r\n            quantityValue--;\r\n            quantity.value = quantityValue;\r\n        }\r\n        else return; \r\n    }\r\n}\r\n\r\n\r\nfunction changeQuantityFocus(e) {\r\n    let target = e.target.closest('button');\r\n    if (!target || !counter.contains(target)) return;\r\n\r\n    target.addEventListener('keydown', changeQuantityKey);\r\n\r\n    function changeQuantityKey(e) {\r\n        if (e.key == 'Space') {\r\n            if (target == plusButton) {\r\n                quantityValue++;\r\n                quantity.value = quantityValue;\r\n            }\r\n            else {\r\n                if (quantityValue > 0) {\r\n                    quantityValue--;\r\n                    quantity.value = quantityValue;\r\n                }\r\n                else return; \r\n            }\r\n        } else return;\r\n    }\r\n}\r\n\r\nfunction quantityChange() {\r\n    quantityValue = Number(quantity.value);\r\n    quantity.value = quantityValue;\r\n}\r\n\r\n\r\nfunction ctaClick(e) {\r\n    if (!e.target.closest('button')) return;\r\n\r\n    const priceText = cartInfo.querySelector('.cart-info__container').lastElementChild;\r\n    const price = 125;\r\n\r\n    if (quantityValue == 0) {\r\n        quantityValue++;\r\n        quantity.value = quantityValue;\r\n    }\r\n\r\n    if (!cart.querySelector('.notification')) {\r\n        notification = document.createElement('div');\r\n        notification.className = 'notification';\r\n        notification.textContent = quantityValue;\r\n        cart.append(notification);\r\n    }\r\n    else notification.innerHTML = `${quantityValue}`;\r\n\r\n    cartEmpty.hidden = true;\r\n    cartEmpty.style.display = 'none';\r\n    cartMain.hidden = false;\r\n    cartMain.style.display = 'flex';\r\n\r\n    if (insertSpan) {\r\n        insertSpan.remove();\r\n        insertSpan = null;\r\n    } \r\n\r\n    insertSpan = document.createElement('span');\r\n    insertSpan.className = 'cart-info__price-sum';\r\n    priceText.append(insertSpan);\r\n\r\n    insertSpan.innerHTML = ` ${quantityValue} = &dollar;${price * quantityValue}`;\r\n\r\n\r\n    //animation\r\n    const animated = document.createElement('span');\r\n    animated.classList.add('buying-signal');\r\n    document.body.append(animated);\r\n    console.log(animated);\r\n}\r\n\r\nfunction cartClick() {\r\n    //cart info visibility\r\n    let isVisible = cartInfo.style.visibility === 'visible';\r\n\r\n    if (isVisible) {\r\n        cartInfo.style.visibility = 'hidden';\r\n        cart.removeAttribute('aria-expanded');\r\n    } else {\r\n        cartInfo.style.visibility = 'visible';\r\n        cart.setAttribute('aria-expanded', 'true');\r\n    }\r\n}\r\n\r\n\r\nfunction deleteProducts() {\r\n    cartMain.hidden = true;\r\n    cartMain.style.display = 'none';\r\n    cartEmpty.hidden = false;\r\n    cartEmpty.style.display = 'flex';\r\n\r\n    notification.remove();\r\n    notification = null;\r\n}"]}