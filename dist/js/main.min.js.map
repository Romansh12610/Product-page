{"version":3,"sources":["main.js"],"names":["_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","_unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","minLen","_arrayLikeToArray","Object","prototype","toString","slice","constructor","name","from","test","arr","len","arr2","_step","nav","document","querySelector","navButton","navSpan","background","createElement","_iterator","querySelectorAll","listItem","onmouseup","target","blur","addEventListener","closest","body","append","classList","add","toggle","slideDistance","maxSlideDistance","_step2","galleryImages","prevGalleryButton","nextGalleryButton","listOfImages","currentSlide","countSlideImages","documentElement","clientWidth","_iterator2","button","gallerySlideNext","offsetWidth","style","transform","concat","gallerySlidePrev","_step3","entireImgSection","thumbSection","allImages","_iterator3","img","tabIndex","focus","bigPicture","onThumbClick","currentPicture","changeImages","onThumbFocus","code","lightboxHandler","lightboxSection","cloneNode","lightboxBackground","closeButton","nextButton","prevButton","bigImage","allThumbs","allImagesSrcs","map","imgNode","getAttribute","replace","allSourcesWebp","src","currentImageInd","className","innerHTML","_i","_buttons","contains","targetSrc","indexOf","changeImagesLightbox","onkeydown","preventDefault","remove","setAttribute","section","picture","targetSrcset","currentBigImage","insertSpan","counter","minusButton","firstElementChild","plusButton","lastElementChild","quantity","quantityValue","Number","cta","cart","cartInfo","cartEmpty","cartMain","deleteButton","notification","changeQuantityClick","changeQuantityFocus","ctaClick","cartClick","deleteProducts","_i2","_arr","key","priceText","textContent","hidden","display","visibility","removeAttribute"],"mappings":"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","file":"main.min.js","sourcesContent":["// Header nav\r\nconst nav = document.querySelector('.header__nav');\r\nconst navButton = document.querySelector('.header__nav-button');\r\nconst navSpan = navButton.querySelector('span');\r\nconst background = document.createElement('div');\r\n\r\nfor (let listItem of nav.querySelectorAll('li')) {\r\n    listItem.onmouseup = (e) => e.target.blur();\r\n}\r\n\r\nnavButton.addEventListener('click', function(e) {\r\n    if (!e.target.closest('button')) return;\r\n    \r\n    if (!nav.querySelector('.background')) {\r\n        document.body.append(background);\r\n        background.classList.add('background');\r\n    };\r\n\r\n    nav.classList.toggle('open');\r\n    navSpan.classList.toggle('open');\r\n    background.classList.toggle('open');\r\n});\r\n\r\n//images - medium + small screens\r\nconst galleryImages = document.querySelector('.main__add-gallery');\r\nconst prevGalleryButton = galleryImages.querySelector('.arrow-prev');\r\nconst nextGalleryButton = galleryImages.querySelector('.arrow-next');\r\nconst listOfImages = galleryImages.querySelector('.main__slide-container');\r\nlet currentSlide = 0, slideDistance, maxSlideDistance;\r\nconst countSlideImages = document.documentElement.clientWidth <= 650 ? 3 : 2;\r\n\r\nfor (let button of galleryImages.querySelectorAll('.main__slide-arrow')) {\r\n    button.onmouseup = (e) => e.target.blur(); \r\n}\r\n\r\n//slide gallery implementation\r\nnextGalleryButton.addEventListener('click', gallerySlideNext);\r\nprevGalleryButton.addEventListener('click', gallerySlidePrev);\r\n\r\nfunction gallerySlideNext() {\r\n    slideDistance = galleryImages.querySelector('img').offsetWidth;\r\n    maxSlideDistance = slideDistance * countSlideImages;\r\n\r\n    if (currentSlide + slideDistance <= maxSlideDistance) {\r\n        listOfImages.style.transform = `translate(-${currentSlide + slideDistance}px)`;\r\n        currentSlide += slideDistance; \r\n    } else {\r\n        return;\r\n    }\r\n}\r\n\r\nfunction gallerySlidePrev() {\r\n    slideDistance = galleryImages.querySelector('img').offsetWidth;\r\n    maxSlideDistance = slideDistance * countSlideImages;\r\n\r\n    if (currentSlide - slideDistance >= 0) {\r\n        listOfImages.style.transform = `translate(-${(currentSlide - slideDistance)}px)`;\r\n        currentSlide -= slideDistance;\r\n    } else {\r\n        return;\r\n    }\r\n}\r\n\r\n// Images - large screens\r\nconst entireImgSection = document.querySelector('.main__section--images');\r\nconst thumbSection = document.querySelector('.main__thumbnails');\r\n\r\n// all images can be focused\r\nconst allImages = entireImgSection.querySelectorAll('img');\r\nfor (let img of allImages) {\r\n    if (document.documentElement.clientWidth >= 1150) {\r\n        img.tabIndex = 0;\r\n    }\r\n}\r\n//init focus\r\nallImages[1].focus();\r\n\r\nconst bigPicture = document.querySelector('[data-current-big]');\r\n\r\nthumbSection.addEventListener('click', onThumbClick);\r\nthumbSection.addEventListener('focusin', onThumbFocus);\r\nbigPicture.addEventListener('click', lightboxHandler);\r\n\r\n\r\nfunction onThumbClick(e) {\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    const currentPicture = target.closest('picture');\r\n    const currentSection = target.closest('section');\r\n\r\n    changeImages(currentSection, currentPicture);\r\n}\r\n\r\nfunction onThumbFocus(e) {\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    target.addEventListener('keydown', function (e) {\r\n        if (e.code == 'Enter' || e.code == 'Space') {\r\n            changeImages(target.closest('picture'));\r\n        } else {\r\n            return;\r\n        }\r\n    })\r\n}\r\n\r\n//Lightbox \r\n\r\nfunction lightboxHandler(e) {\r\n    if (document.documentElement.clientWidth < 1150) return;\r\n\r\n    let target = e.target.closest('img');\r\n    if (!target) return;\r\n\r\n    const lightboxSection = entireImgSection.cloneNode(true);\r\n    const lightboxBackground = document.createElement('div');\r\n    const closeButton = document.createElement('span');\r\n    const nextButton = document.createElement('button');\r\n    const prevButton = document.createElement('button');\r\n    const bigImage = lightboxSection.querySelector('[data-current-big]');\r\n    const allThumbs = Array.from(lightboxSection.querySelectorAll('.main__image--thumb'));\r\n    const allImagesSrcs = allThumbs.map(imgNode => {\r\n        return imgNode.getAttribute('src').replace(/-thumbnail/, '');\r\n    });\r\n    const allSourcesWebp = allImagesSrcs.map(src => {\r\n        return src.replace(/jpg$/, 'webp');\r\n    });\r\n    let currentImageInd = 0;\r\n\r\n    if (!document.querySelector('.lightbox-section')) {\r\n        lightboxSection.classList.add('lightbox-section', 'container-main');\r\n        document.querySelector('.main').append(lightboxSection);\r\n\r\n        lightboxBackground.classList.add('lightbox-background');\r\n        document.querySelector('.main').append(lightboxBackground);\r\n\r\n        //buttons\r\n        closeButton.className = 'lightbox-section__close';\r\n        nextButton.className = 'lightbox-section__next';\r\n        nextButton.innerHTML = '&#10095;';\r\n        prevButton.className = 'lightbox-section__prev';\r\n        prevButton.innerHTML = '&#10094;'\r\n\r\n        const buttons = [closeButton, nextButton, prevButton];\r\n        for (let button of buttons) {\r\n            lightboxSection.append(button);\r\n            button.tabIndex = 0;\r\n            button.onmouseup = (e) => e.target.blur();\r\n        }\r\n    }\r\n\r\n    lightboxBackground.classList.add('open');\r\n    lightboxSection.classList.add('open');\r\n\r\n    //events\r\n    lightboxSection.addEventListener('click', clickThumb);\r\n    lightboxSection.addEventListener('focusin', focusThumb);\r\n    closeButton.addEventListener('click', closeLightbox);\r\n    nextButton.addEventListener('click', slideNextImage);\r\n    prevButton.addEventListener('click', slidePrevImage); \r\n\r\n    //initial focus\r\n    allThumbs[0].focus();\r\n\r\n    //click/focus listeners\r\n    function clickThumb(e) {\r\n        let target = e.target.closest('img');\r\n        if (!target || !lightboxSection.contains(target)) return;\r\n\r\n        let targetSrc = target.getAttribute('src').replace(/-thumbnail/, '');\r\n        currentImageInd = allImagesSrcs.indexOf(targetSrc);\r\n\r\n        changeImagesLightbox();\r\n    }\r\n\r\n    function focusThumb(e) {\r\n        let target = e.target.closest('img');\r\n        if (!target || !lightboxSection.contains(target)) return;\r\n\r\n        target.onkeydown = function (e) {\r\n            if (e.code == 'Enter' || e.code == 'Space') {\r\n                e.preventDefault(); // prevent scroll on 'space'\r\n                let targetSrc = target.getAttribute('src').replace(/-thumbnail/, '');\r\n                currentImageInd = allImagesSrcs.indexOf(targetSrc);\r\n\r\n                changeImagesLightbox();\r\n            } else {\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    //event-listeners for buttons;\r\n    function closeLightbox() {\r\n        lightboxSection.remove();\r\n        lightboxBackground.remove();\r\n    }\r\n\r\n    function slideNextImage() {\r\n        if (currentImageInd === allImagesSrcs.length - 1) return;\r\n\r\n        currentImageInd++;\r\n        allThumbs[currentImageInd].focus();\r\n        changeImagesLightbox();\r\n    }\r\n\r\n    function slidePrevImage() {\r\n        if (currentImageInd === 0) return;\r\n\r\n        currentImageInd--;\r\n        allThumbs[currentImageInd].focus();\r\n        changeImagesLightbox();\r\n    }\r\n\r\n\r\n    //helper functions\r\n    function changeImagesLightbox() {\r\n        bigImage.querySelector('img').setAttribute('src', allImagesSrcs[currentImageInd]);\r\n        bigImage.querySelector('source').setAttribute('srcset', allSourcesWebp[currentImageInd]);\r\n    }\r\n}\r\n\r\n\r\n\r\n//helper functions \r\nfunction changeImages(section, picture) {\r\n    const targetSrc = picture.querySelector('img').getAttribute('src').replace(/-thumbnail/, '');\r\n    const targetSrcset = picture.querySelector('source').getAttribute('srcset').replace(/-thumbnail/, '');\r\n\r\n    const currentBigImage = section.querySelector('[data-current-big]');\r\n\r\n    currentBigImage.querySelector('img').setAttribute('src', targetSrc);\r\n    currentBigImage.querySelector('source').setAttribute('srcset', targetSrcset);\r\n}\r\n\r\n\r\n// Product info\r\n\r\nconst counter = document.querySelector('.main__counter');\r\nconst minusButton = counter.firstElementChild;\r\nconst plusButton = counter.lastElementChild;\r\nconst quantity = counter.querySelector('input[type=\"number\"]');\r\nlet quantityValue = Number(quantity.value);\r\n\r\nconst cta = document.querySelector('.main__cta');\r\nconst cart = document.querySelector('.header__cart');\r\nconst cartInfo = document.querySelector('.cart-info');\r\nconst cartEmpty = cartInfo.querySelector('.cart-info__init');\r\nconst cartMain = cartInfo.querySelector('.cart-info__wrapper');\r\nconst deleteButton = cartInfo.querySelector('.cart-info__button');\r\nlet notification = null;\r\nlet insertSpan;\r\n\r\n\r\ncounter.addEventListener('click', changeQuantityClick);\r\ncounter.addEventListener('focusin', changeQuantityFocus);\r\ncta.addEventListener('click', ctaClick);\r\ncart.addEventListener('click', cartClick);\r\ndeleteButton.addEventListener('click', deleteProducts);\r\n\r\n//get rid of keeping focus after click  \r\nfor (let button of [document.querySelector('.cart-info__checkout'), cta]) {\r\n    button.onmouseup = (e) => e.target.blur();\r\n}\r\n\r\nfunction changeQuantityClick(e) {\r\n    let target = e.target.closest('button');\r\n    if (!target || !counter.contains(target)) return;\r\n\r\n    if (target == plusButton) {\r\n        quantityValue = quantityValue + 1;\r\n        quantity.value = quantityValue;\r\n    }\r\n    else {\r\n        if (quantityValue > 0) {\r\n            quantityValue--;\r\n            quantity.value = quantityValue;\r\n        }\r\n        else return; \r\n    }\r\n}\r\n\r\n\r\nfunction changeQuantityFocus(e) {\r\n    let target = e.target.closest('button');\r\n    if (!target || !counter.contains(target)) return;\r\n\r\n    target.addEventListener('keydown', changeQuantityKey);\r\n\r\n    function changeQuantityKey(e) {\r\n        if (e.key == 'Space') {\r\n            if (target == plusButton) {\r\n                quantityValue++;\r\n                quantity.value = quantityValue;\r\n            }\r\n            else {\r\n                if (quantityValue > 0) {\r\n                    quantityValue--;\r\n                    quantity.value = quantityValue;\r\n                }\r\n                else return; \r\n            }\r\n        } else return;\r\n    }\r\n}\r\n\r\n\r\nfunction ctaClick(e) {\r\n    if (!e.target.closest('button')) return;\r\n\r\n    const priceText = cartInfo.querySelector('.cart-info__container').lastElementChild;\r\n    const price = 125;\r\n\r\n    if (quantityValue == 0) {\r\n        quantityValue++;\r\n        quantity.value = quantityValue;\r\n    }\r\n\r\n    if (!cart.querySelector('.notification')) {\r\n        notification = document.createElement('div');\r\n        notification.className = 'notification';\r\n        notification.textContent = quantityValue;\r\n        cart.append(notification);\r\n    }\r\n    else notification.innerHTML = `${quantityValue}`;\r\n\r\n    cartEmpty.hidden = true;\r\n    cartEmpty.style.display = 'none';\r\n    cartMain.hidden = false;\r\n    cartMain.style.display = 'flex';\r\n\r\n    if (insertSpan) {\r\n        insertSpan.remove();\r\n        insertSpan = null;\r\n    } \r\n\r\n    insertSpan = document.createElement('span');\r\n    insertSpan.className = 'cart-info__price-sum';\r\n    priceText.append(insertSpan);\r\n\r\n    insertSpan.innerHTML = ` ${quantityValue} = &dollar;${price * quantityValue}`;\r\n}\r\n\r\nfunction cartClick() {\r\n    //cart info visibility\r\n    let isVisible = cartInfo.style.visibility === 'visible';\r\n\r\n    if (isVisible) {\r\n        cartInfo.style.visibility = 'hidden';\r\n        cart.removeAttribute('aria-expanded');\r\n    } else {\r\n        cartInfo.style.visibility = 'visible';\r\n        cart.setAttribute('aria-expanded', 'true');\r\n    }\r\n}\r\n\r\n\r\nfunction deleteProducts() {\r\n    cartMain.hidden = true;\r\n    cartMain.style.display = 'none';\r\n    cartEmpty.hidden = false;\r\n    cartEmpty.style.display = 'flex';\r\n\r\n    notification.remove();\r\n    notification = null;\r\n}"]}